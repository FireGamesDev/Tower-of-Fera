[gd_scene load_steps=52 format=2]

[ext_resource path="res://Sprites/Environment.png" type="Texture" id=1]
[ext_resource path="res://Scripts/Game_manager.gd" type="Script" id=2]
[ext_resource path="res://Sprites/Moon2.png" type="Texture" id=3]
[ext_resource path="res://Scenes/Tower.tscn" type="PackedScene" id=4]
[ext_resource path="res://Scenes/Bow.tscn" type="PackedScene" id=5]
[ext_resource path="res://Scenes/Health.tscn" type="PackedScene" id=6]
[ext_resource path="res://Scenes/ArrowAmmo.tscn" type="PackedScene" id=7]
[ext_resource path="res://Scripts/camera_shake.gd" type="Script" id=8]
[ext_resource path="res://Sprites/Ground_light.png" type="Texture" id=9]
[ext_resource path="res://Sprites/bg_light.png" type="Texture" id=10]
[ext_resource path="res://Sprites/Vignette.png" type="Texture" id=11]
[ext_resource path="res://Scenes/Rain.tscn" type="PackedScene" id=12]
[ext_resource path="res://Scripts/Lightning.gd" type="Script" id=13]
[ext_resource path="res://Scenes/Spawner.tscn" type="PackedScene" id=14]
[ext_resource path="res://SFX/Lightning_strike.wav" type="AudioStream" id=15]
[ext_resource path="res://Sprites/lightning.png" type="Texture" id=16]
[ext_resource path="res://Scenes/MouseTrail.tscn" type="PackedScene" id=17]
[ext_resource path="res://Scenes/Fireflies.tscn" type="PackedScene" id=18]
[ext_resource path="res://Scenes/ShootingStarSystem.tscn" type="PackedScene" id=19]
[ext_resource path="res://Sprites/BossBar.png" type="Texture" id=20]
[ext_resource path="res://Scenes/Joystick/Joystick.tscn" type="PackedScene" id=21]
[ext_resource path="res://Sprites/StarVignette.png" type="Texture" id=22]

[sub_resource type="Animation" id=1]
resource_name = "end_anim"
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath(".:zoom")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 2 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 0.3, 0.3 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 2 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 512, 300 ), Vector2( 955.369, 452.285 ) ]
}

[sub_resource type="Animation" id=26]
resource_name = "StarVignette"
tracks/0/type = "value"
tracks/0/path = NodePath(".:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Color( 1, 1, 1, 0 ), Color( 1, 1, 1, 0.392157 ) ]
}

[sub_resource type="StyleBoxFlat" id=2]
bg_color = Color( 0.815686, 0.505882, 0.34902, 1 )

[sub_resource type="StyleBoxFlat" id=3]
bg_color = Color( 0.0509804, 0.168627, 0.270588, 1 )

[sub_resource type="StyleBoxFlat" id=4]
bg_color = Color( 0.192157, 0.290196, 0.454902, 0.596078 )

[sub_resource type="DynamicFontData" id=5]
font_path = "res://Font/PixelGameFont.ttf"

[sub_resource type="DynamicFont" id=6]
size = 30
font_data = SubResource( 5 )

[sub_resource type="DynamicFontData" id=7]
font_path = "res://Font/PixelGameFont.ttf"

[sub_resource type="DynamicFont" id=8]
size = 30
font_data = SubResource( 7 )

[sub_resource type="Animation" id=9]
length = 0.6
tracks/0/type = "value"
tracks/0/path = NodePath(".:rect_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 1.5, 1.5 ), Vector2( 1, 1 ) ]
}

[sub_resource type="Animation" id=10]
tracks/0/type = "value"
tracks/0/path = NodePath("TextureProgress:value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 100.0 ]
}

[sub_resource type="RectangleShape2D" id=11]
extents = Vector2( 10, 6.359 )

[sub_resource type="Animation" id=12]
length = 0.6
tracks/0/type = "value"
tracks/0/path = NodePath(".:rect_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 1.5, 1.5 ), Vector2( 1, 1 ) ]
}

[sub_resource type="Animation" id=13]
tracks/0/type = "value"
tracks/0/path = NodePath("TextureProgress:value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 100.0 ]
}

[sub_resource type="Animation" id=14]
length = 0.6
tracks/0/type = "value"
tracks/0/path = NodePath(".:rect_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 1.5, 1.5 ), Vector2( 1, 1 ) ]
}

[sub_resource type="Animation" id=15]
tracks/0/type = "value"
tracks/0/path = NodePath("TextureProgress:value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 100.0 ]
}

[sub_resource type="Animation" id=16]
length = 0.6
tracks/0/type = "value"
tracks/0/path = NodePath(".:rect_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 1.5, 1.5 ), Vector2( 1, 1 ) ]
}

[sub_resource type="Animation" id=17]
tracks/0/type = "value"
tracks/0/path = NodePath("TextureProgress:value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 100.0 ]
}

[sub_resource type="Animation" id=18]
tracks/0/type = "value"
tracks/0/path = NodePath("..:rect_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1e-05, 1e-05 ), Vector2( 1, 1 ) ]
}

[sub_resource type="Animation" id=19]
length = 0.6
tracks/0/type = "value"
tracks/0/path = NodePath(".:rect_scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.3, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 1, 1 ), Vector2( 1.5, 1.5 ), Vector2( 1, 1 ) ]
}

[sub_resource type="Animation" id=20]
tracks/0/type = "value"
tracks/0/path = NodePath("TextureProgress:value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 100.0 ]
}

[sub_resource type="Animation" id=21]
tracks/0/type = "value"
tracks/0/path = NodePath("TextureProgress:value")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 100.0 ]
}

[sub_resource type="RectangleShape2D" id=22]
extents = Vector2( 414.174, 39.5447 )

[sub_resource type="CapsuleShape2D" id=23]
radius = 53.3942
height = 817.872

[sub_resource type="Shader" id=30]
code = "shader_type canvas_item;

void vertex() {
	VERTEX.x += cos(TIME) * (VERTEX.y - 38.0) * 0.02;
	VERTEX.y += cos(TIME) * (VERTEX.x - 20.0) * 0.01;
}"

[sub_resource type="ShaderMaterial" id=25]
shader = SubResource( 30 )

[sub_resource type="Shader" id=27]
code = "shader_type canvas_item;

// Gonkee's fog shader for Godot 3 - full tutorial https://youtu.be/QEaTsz_0o44
// If you use this shader, I would prefer it if you gave credit to me and my channel

uniform vec3 color = vec3(0.35, 0.48, 0.95);
uniform int OCTAVES = 4;

float rand(vec2 coord){
	return fract(sin(dot(coord, vec2(56, 78)) * 1000.0) * 1000.0);
}

float noise(vec2 coord){
	vec2 i = floor(coord);
	vec2 f = fract(coord);

	// 4 corners of a rectangle surrounding our point
	float a = rand(i);
	float b = rand(i + vec2(1.0, 0.0));
	float c = rand(i + vec2(0.0, 1.0));
	float d = rand(i + vec2(1.0, 1.0));

	vec2 cubic = f * f * (3.0 - 2.0 * f);

	return mix(a, b, cubic.x) + (c - a) * cubic.y * (1.0 - cubic.x) + (d - b) * cubic.x * cubic.y;
}

float fbm(vec2 coord){
	float value = 0.0;
	float scale = 0.5;

	for(int i = 0; i < OCTAVES; i++){
		value += noise(coord) * scale;
		coord *= 1.0;
		scale *= 0.25;
	}
	return value;
}

void fragment() {
	vec2 coord = UV * 20.0;

	vec2 motion = vec2( fbm(coord + vec2(TIME * -0.5, TIME * 0.5)) );

	float final = fbm(coord + motion);

	COLOR = vec4(color, final * 0.5);
}"

[sub_resource type="ShaderMaterial" id=28]
shader = SubResource( 27 )
shader_param/color = Vector3( 0.35, 0.48, 0.95 )
shader_param/OCTAVES = 2

[sub_resource type="Curve" id=29]
_data = [ Vector2( 0, 0 ), 0.0, 0.0, 0, 0, Vector2( 0.990909, 0.990909 ), 0.0, 0.0, 0, 0 ]

[node name="Game" type="Node2D"]
script = ExtResource( 2 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Camera2D" type="Camera2D" parent="CanvasLayer"]
position = Vector2( 512, 300 )
current = true
script = ExtResource( 8 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Camera2D"]
anims/end_anim = SubResource( 1 )

[node name="Control" type="Control" parent="CanvasLayer"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -194.941
margin_top = 489.472
margin_right = -194.941
margin_bottom = 489.472
__meta__ = {
"_edit_use_anchors_": false
}

[node name="StarVignette" type="Sprite" parent="CanvasLayer/Control"]
modulate = Color( 1, 1, 1, 0 )
position = Vector2( 1314.96, 735.8 )
z_index = 10
texture = ExtResource( 22 )
offset = Vector2( -609.769, -927.214 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Control/StarVignette"]
anims/StarVignette = SubResource( 26 )

[node name="Health" parent="CanvasLayer" instance=ExtResource( 6 )]
margin_bottom = 63.0

[node name="Menu" type="Button" parent="CanvasLayer"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -530.689
margin_top = -202.868
margin_right = -330.689
margin_bottom = -127.868
rect_pivot_offset = Vector2( 100, 37 )
custom_styles/hover = SubResource( 2 )
custom_styles/pressed = SubResource( 3 )
custom_styles/normal = SubResource( 4 )
custom_fonts/font = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Menu"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 50.0
margin_top = -10.0
margin_right = 50.0
margin_bottom = -10.0
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]MENU"
text = "
MENU"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Cleared" type="RichTextLabel" parent="CanvasLayer/Menu"]
visible = false
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -67.7711
margin_top = -29.7451
margin_right = 132.229
margin_bottom = 45.2549
rect_scale = Vector2( 0.4, 0.4 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 0, 0, 0, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]CLEARED"
text = "
CLEARED"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Menu"]
anims/PlayButton = SubResource( 9 )

[node name="Hard_light" type="Node2D" parent="CanvasLayer/Menu"]
position = Vector2( 189.827, 28.4361 )
rotation = 1.52392
script = ExtResource( 13 )
is_menu = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Menu/Hard_light"]
playback_speed = 3.0
anims/Lightning = SubResource( 10 )

[node name="TextureProgress" type="TextureProgress" parent="CanvasLayer/Menu/Hard_light"]
margin_left = 22.653
margin_top = -366.223
margin_right = 222.653
margin_bottom = -166.223
rect_scale = Vector2( 0.2, 1 )
mouse_filter = 2
input_pass_on_modal_close_click = false
texture_progress = ExtResource( 16 )
fill_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="CanvasLayer/Menu/Hard_light"]
wait_time = 20.0
one_shot = true

[node name="SpawnArea" type="Area2D" parent="CanvasLayer/Menu/Hard_light"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/Menu/Hard_light/SpawnArea"]
position = Vector2( -16.4744, -188.834 )
shape = SubResource( 11 )
disabled = true

[node name="SFX" type="AudioStreamPlayer" parent="CanvasLayer/Menu/Hard_light"]
stream = ExtResource( 15 )

[node name="Waves" type="RichTextLabel" parent="CanvasLayer"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -112.0
margin_right = 188.0
margin_bottom = 102.0
rect_pivot_offset = Vector2( 125, 40 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
"
text = "
"
fit_content_height = true
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Remaining" type="RichTextLabel" parent="CanvasLayer"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -137.0
margin_top = -80.0
margin_right = 163.0
margin_bottom = -12.0
rect_pivot_offset = Vector2( 125, 40 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
"
text = "
"
fit_content_height = true
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Lose" type="Control" parent="CanvasLayer"]
visible = false
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -250.0
margin_top = -250.0
margin_right = 250.0
margin_bottom = 250.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/Lose"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -512.0
margin_top = -300.0
margin_right = 512.0
margin_bottom = 300.0
color = Color( 0.0784314, 0.196078, 0.333333, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Lose"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -197.975
margin_top = 81.8008
margin_right = 202.025
margin_bottom = 261.801
rect_pivot_offset = Vector2( 100, 34 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]THE TOWN FALLED! 

CLEARED WAVES: "
text = "
THE TOWN FALLED! 

CLEARED WAVES: "
fit_content_height = true
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Restart" type="Button" parent="CanvasLayer/Lose"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -103.264
margin_top = 39.4748
margin_right = 96.7364
margin_bottom = 114.475
rect_pivot_offset = Vector2( 100, 37 )
custom_styles/hover = SubResource( 2 )
custom_styles/pressed = SubResource( 3 )
custom_styles/normal = SubResource( 4 )
custom_fonts/font = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Lose/Restart"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 21.7158
margin_top = -6.46445
margin_right = 21.7158
margin_bottom = -6.46445
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]RESTART"
text = "
RESTART"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Lose/Restart"]
anims/PlayButton = SubResource( 12 )

[node name="Restart_strike" type="Node2D" parent="CanvasLayer/Lose/Restart"]
position = Vector2( 189.827, 28.4361 )
rotation = 1.52392
script = ExtResource( 13 )
is_menu = true
is_restart_button = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Lose/Restart/Restart_strike"]
playback_speed = 3.0
anims/Lightning = SubResource( 13 )

[node name="TextureProgress" type="TextureProgress" parent="CanvasLayer/Lose/Restart/Restart_strike"]
margin_left = 22.653
margin_top = -366.223
margin_right = 222.653
margin_bottom = -166.223
rect_scale = Vector2( 0.2, 1 )
mouse_filter = 2
input_pass_on_modal_close_click = false
texture_progress = ExtResource( 16 )
fill_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="CanvasLayer/Lose/Restart/Restart_strike"]
wait_time = 20.0
one_shot = true

[node name="SpawnArea" type="Area2D" parent="CanvasLayer/Lose/Restart/Restart_strike"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/Lose/Restart/Restart_strike/SpawnArea"]
position = Vector2( -16.4744, -188.834 )
shape = SubResource( 11 )
disabled = true

[node name="SFX" type="AudioStreamPlayer" parent="CanvasLayer/Lose/Restart/Restart_strike"]
stream = ExtResource( 15 )

[node name="SFX_lightning" type="Timer" parent="CanvasLayer/Lose/Restart/Restart_strike"]

[node name="Menu_lose" type="Button" parent="CanvasLayer/Lose"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -103.54
margin_top = 133.512
margin_right = 96.4597
margin_bottom = 208.512
rect_pivot_offset = Vector2( 100, 37 )
custom_styles/hover = SubResource( 2 )
custom_styles/pressed = SubResource( 3 )
custom_styles/normal = SubResource( 4 )
custom_fonts/font = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Lose/Menu_lose"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 50.0
margin_top = -10.0
margin_right = 50.0
margin_bottom = -10.0
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]MENU"
text = "
MENU"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Cleared" type="RichTextLabel" parent="CanvasLayer/Lose/Menu_lose"]
visible = false
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -67.7711
margin_top = -29.7451
margin_right = 132.229
margin_bottom = 45.2549
rect_scale = Vector2( 0.4, 0.4 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 0, 0, 0, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]CLEARED"
text = "
CLEARED"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Lose/Menu_lose"]
anims/PlayButton = SubResource( 14 )

[node name="Menu_lose" type="Node2D" parent="CanvasLayer/Lose/Menu_lose"]
position = Vector2( 189.827, 28.4361 )
rotation = 1.52392
script = ExtResource( 13 )
is_menu = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Lose/Menu_lose/Menu_lose"]
playback_speed = 3.0
anims/Lightning = SubResource( 15 )

[node name="TextureProgress" type="TextureProgress" parent="CanvasLayer/Lose/Menu_lose/Menu_lose"]
margin_left = 22.653
margin_top = -366.223
margin_right = 222.653
margin_bottom = -166.223
rect_scale = Vector2( 0.2, 1 )
mouse_filter = 2
input_pass_on_modal_close_click = false
texture_progress = ExtResource( 16 )
fill_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="CanvasLayer/Lose/Menu_lose/Menu_lose"]
wait_time = 20.0
one_shot = true

[node name="SpawnArea" type="Area2D" parent="CanvasLayer/Lose/Menu_lose/Menu_lose"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/Lose/Menu_lose/Menu_lose/SpawnArea"]
position = Vector2( -16.4744, -188.834 )
shape = SubResource( 11 )
disabled = true

[node name="SFX" type="AudioStreamPlayer" parent="CanvasLayer/Lose/Menu_lose/Menu_lose"]
stream = ExtResource( 15 )

[node name="Win" type="Control" parent="CanvasLayer"]
visible = false
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -250.0
margin_top = -250.0
margin_right = 250.0
margin_bottom = 250.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/Win"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -512.0
margin_top = -300.0
margin_right = 512.0
margin_bottom = 300.0
color = Color( 0.0784314, 0.196078, 0.333333, 1 )

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Win"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -148.586
margin_top = 101.823
margin_right = 151.414
margin_bottom = 339.823
rect_pivot_offset = Vector2( 100, 34 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]YOU CLEARED EASY MODE!

CONGRATS!"
text = "
YOU CLEARED EASY MODE!

CONGRATS!"
fit_content_height = true
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Win" type="Button" parent="CanvasLayer/Win"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -97.9243
margin_top = 107.552
margin_right = 102.076
margin_bottom = 182.552
rect_pivot_offset = Vector2( 100, 37 )
custom_styles/hover = SubResource( 2 )
custom_styles/pressed = SubResource( 3 )
custom_styles/normal = SubResource( 4 )
custom_fonts/font = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Win/Win"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 50.0
margin_top = -10.0
margin_right = 50.0
margin_bottom = -10.0
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]MENU"
text = "
MENU"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Win/Win"]
anims/PlayButton = SubResource( 16 )

[node name="Win_light" type="Node2D" parent="CanvasLayer/Win/Win"]
position = Vector2( 189.827, 28.4361 )
rotation = 1.52392
script = ExtResource( 13 )
is_menu = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Win/Win/Win_light"]
playback_speed = 3.0
anims/Lightning = SubResource( 17 )

[node name="TextureProgress" type="TextureProgress" parent="CanvasLayer/Win/Win/Win_light"]
margin_left = 22.653
margin_top = -366.223
margin_right = 222.653
margin_bottom = -166.223
rect_scale = Vector2( 0.2, 1 )
mouse_filter = 2
input_pass_on_modal_close_click = false
texture_progress = ExtResource( 16 )
fill_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="CanvasLayer/Win/Win/Win_light"]
wait_time = 20.0
one_shot = true

[node name="SpawnArea" type="Area2D" parent="CanvasLayer/Win/Win/Win_light"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/Win/Win/Win_light/SpawnArea"]
position = Vector2( -16.4744, -188.834 )
shape = SubResource( 11 )
disabled = true

[node name="SFX" type="AudioStreamPlayer" parent="CanvasLayer/Win/Win/Win_light"]
stream = ExtResource( 15 )

[node name="Tutorial" type="Control" parent="CanvasLayer"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -175.0
margin_top = -200.0
margin_right = 175.0
margin_bottom = 200.0
rect_scale = Vector2( 1e-05, 1e-05 )
rect_pivot_offset = Vector2( 175, 200 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ColorRect" type="ColorRect" parent="CanvasLayer/Tutorial"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -175.0
margin_top = -200.0
margin_right = 175.0
margin_bottom = 200.0
color = Color( 0.0784314, 0.196078, 0.333333, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Tutorial"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -145.219
margin_top = 46.8223
margin_right = 154.781
margin_bottom = 284.822
rect_pivot_offset = Vector2( 100, 34 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]USE THE JOYSTICK TO SHOOT!"
text = "
USE THE JOYSTICK TO SHOOT!"
fit_content_height = true
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Close_tutorial" type="Button" parent="CanvasLayer/Tutorial"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -97.9243
margin_top = 107.552
margin_right = 102.076
margin_bottom = 182.552
rect_pivot_offset = Vector2( 100, 37 )
custom_styles/hover = SubResource( 2 )
custom_styles/pressed = SubResource( 3 )
custom_styles/normal = SubResource( 4 )
custom_fonts/font = SubResource( 6 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Text" type="RichTextLabel" parent="CanvasLayer/Tutorial/Close_tutorial"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 50.0
margin_top = -10.0
margin_right = 50.0
margin_bottom = -10.0
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]CLOSE"
text = "
CLOSE"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Tutorial/Close_tutorial"]
anims/Appear = SubResource( 18 )
anims/PlayButton = SubResource( 19 )

[node name="Tutorial_light" type="Node2D" parent="CanvasLayer/Tutorial/Close_tutorial"]
position = Vector2( 189.827, 28.4361 )
rotation = 1.52392
script = ExtResource( 13 )
is_menu = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light"]
playback_speed = 3.0
anims/Lightning = SubResource( 20 )

[node name="TextureProgress" type="TextureProgress" parent="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light"]
margin_left = 22.653
margin_top = -366.223
margin_right = 222.653
margin_bottom = -166.223
rect_scale = Vector2( 0.2, 1 )
mouse_filter = 2
input_pass_on_modal_close_click = false
texture_progress = ExtResource( 16 )
fill_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light"]
wait_time = 20.0
one_shot = true

[node name="SpawnArea" type="Area2D" parent="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light/SpawnArea"]
position = Vector2( -16.4744, -188.834 )
shape = SubResource( 11 )
disabled = true

[node name="SFX" type="AudioStreamPlayer" parent="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light"]
stream = ExtResource( 15 )

[node name="Fireflies" parent="CanvasLayer" instance=ExtResource( 18 )]
position = Vector2( 517.342, 207.896 )
emission_rect_extents = Vector2( 600, 600 )

[node name="TimerText" type="RichTextLabel" parent="CanvasLayer"]
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
margin_left = -12.0203
margin_top = -81.7255
margin_right = 47.9797
margin_bottom = -21.7255
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]"
text = "
"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TrainScoreText" type="RichTextLabel" parent="CanvasLayer"]
anchor_left = 0.5
anchor_right = 0.5
margin_left = -100.0
margin_right = 100.0
margin_bottom = 60.0
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]"
text = "
"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BossBar" type="TextureProgress" parent="CanvasLayer"]
visible = false
anchor_left = 0.5
anchor_right = 0.5
margin_left = -123.112
margin_top = 52.7796
margin_right = 126.888
margin_bottom = 92.7796
rect_scale = Vector2( 1, 0.4 )
mouse_filter = 2
value = 100.0
texture_under = ExtResource( 20 )
texture_progress = ExtResource( 20 )
tint_under = Color( 1, 1, 1, 0.392157 )
tint_progress = Color( 1, 0.666667, 0.368627, 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BossText" type="RichTextLabel" parent="CanvasLayer/BossBar"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -58.5685
margin_top = 14.0504
margin_right = 151.431
margin_bottom = 74.0504
rect_scale = Vector2( 0.5, 1.4 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]HEALTH: 100"
text = "
HEALTH: 100"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Name" type="RichTextLabel" parent="CanvasLayer/BossBar"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -46.077
margin_top = -125.183
margin_right = 163.923
margin_bottom = -65.1829
rect_scale = Vector2( 0.5, 1.4 )
mouse_filter = 2
custom_fonts/normal_font = SubResource( 8 )
custom_colors/default_color = Color( 1, 0.666667, 0.368627, 1 )
bbcode_enabled = true
bbcode_text = "
[wave]THE KING"
text = "
THE KING"
scroll_active = false
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Joystick" parent="CanvasLayer" instance=ExtResource( 21 )]

[node name="Map" type="Node2D" parent="."]
position = Vector2( -194.941, 489.472 )

[node name="ShootingStarsSystem" parent="Map" instance=ExtResource( 19 )]
position = Vector2( 510.765, -346.87 )
rotation = 1.53589

[node name="Light" type="Sprite" parent="Map"]
position = Vector2( 770.823, -212.107 )
scale = Vector2( 0.784635, 0.7 )
texture = ExtResource( 10 )

[node name="Lightning" type="Node2D" parent="Map"]
position = Vector2( 540.537, -107.026 )
script = ExtResource( 13 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Map/Lightning"]
playback_speed = 3.0
anims/Lightning = SubResource( 21 )

[node name="TextureProgress" type="TextureProgress" parent="Map/Lightning"]
margin_left = 22.653
margin_top = -366.223
margin_right = 222.653
margin_bottom = -166.223
rect_scale = Vector2( 0.2, 1 )
texture_progress = ExtResource( 16 )
fill_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Timer" type="Timer" parent="Map/Lightning"]
wait_time = 10.0
one_shot = true
autostart = true

[node name="SpawnArea" type="Area2D" parent="Map/Lightning"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Lightning/SpawnArea"]
position = Vector2( 243.45, -107.146 )
shape = SubResource( 22 )
disabled = true

[node name="SFX" type="AudioStreamPlayer" parent="Map/Lightning"]
stream = ExtResource( 15 )

[node name="Tower" parent="Map" instance=ExtResource( 4 )]
position = Vector2( 265.561, -43.7932 )

[node name="Ground" type="TextureRect" parent="Map"]
margin_left = -852.537
margin_top = 5.99323
margin_right = 747.463
margin_bottom = 113.993
rect_scale = Vector2( 1.3, 1 )
texture = ExtResource( 1 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Light" type="Sprite" parent="Map/Ground"]
position = Vector2( 860.559, -42.0607 )
texture = ExtResource( 9 )

[node name="Ground" type="Area2D" parent="Map/Ground" groups=[
"Ground",
]]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Ground/Ground"]
position = Vector2( 1203.5, 77.4569 )
rotation = -1.57169
shape = SubResource( 23 )

[node name="Moon" type="TextureRect" parent="Map"]
material = SubResource( 25 )
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = 318.0
margin_top = -490.0
margin_right = 839.0
margin_bottom = 142.0
rect_scale = Vector2( 0.6, 0.6 )
mouse_filter = 2
texture = ExtResource( 3 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Vignette" type="Sprite" parent="Map"]
position = Vector2( 1230.78, 448.214 )
scale = Vector2( 0.762742, 0.7 )
texture = ExtResource( 11 )
offset = Vector2( -609.769, -927.214 )

[node name="Bow" parent="." instance=ExtResource( 5 )]
position = Vector2( 90.0919, 303.34 )
rotation = -0.39695

[node name="Ammo" parent="Bow" instance=ExtResource( 7 )]
position = Vector2( 4.31189, -234.608 )
rotation = 0.39695

[node name="Rain" parent="." instance=ExtResource( 12 )]
position = Vector2( 538.008, -111.377 )

[node name="Spawner" parent="." instance=ExtResource( 14 )]
position = Vector2( -2.37842, -91.5689 )

[node name="Fog" type="Sprite" parent="."]
modulate = Color( 1, 1, 1, 0.607843 )
material = SubResource( 28 )
position = Vector2( 528.717, 247.641 )
rotation = 0.530663
scale = Vector2( 1.26996, 1.42614 )
texture = ExtResource( 10 )

[node name="MouseTrail" parent="." instance=ExtResource( 17 )]
width = 5.0
width_curve = SubResource( 29 )
default_color = Color( 1, 1, 1, 0.588235 )

[connection signal="pressed" from="CanvasLayer/Menu" to="." method="_on_Menu_pressed"]
[connection signal="strike" from="CanvasLayer/Menu/Hard_light" to="." method="_on_Hard_light_strike"]
[connection signal="animation_finished" from="CanvasLayer/Menu/Hard_light/AnimationPlayer" to="CanvasLayer/Menu/Hard_light" method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="CanvasLayer/Menu/Hard_light/Timer" to="CanvasLayer/Menu/Hard_light" method="_on_Timer_timeout"]
[connection signal="pressed" from="CanvasLayer/Lose/Restart" to="." method="_on_Restart_pressed"]
[connection signal="strike" from="CanvasLayer/Lose/Restart/Restart_strike" to="." method="_on_Restart_strike_strike"]
[connection signal="animation_finished" from="CanvasLayer/Lose/Restart/Restart_strike/AnimationPlayer" to="CanvasLayer/Lose/Restart/Restart_strike" method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="CanvasLayer/Lose/Restart/Restart_strike/Timer" to="CanvasLayer/Lose/Restart/Restart_strike" method="_on_Timer_timeout"]
[connection signal="timeout" from="CanvasLayer/Lose/Restart/Restart_strike/SFX_lightning" to="CanvasLayer/Lose/Restart/Restart_strike" method="_on_SFX_lightning_timeout"]
[connection signal="pressed" from="CanvasLayer/Lose/Menu_lose" to="." method="_on_Menu_lose_pressed"]
[connection signal="strike" from="CanvasLayer/Lose/Menu_lose/Menu_lose" to="." method="_on_Menu_lose_strike"]
[connection signal="animation_finished" from="CanvasLayer/Lose/Menu_lose/Menu_lose/AnimationPlayer" to="CanvasLayer/Lose/Menu_lose/Menu_lose" method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="CanvasLayer/Lose/Menu_lose/Menu_lose/Timer" to="CanvasLayer/Lose/Menu_lose/Menu_lose" method="_on_Timer_timeout"]
[connection signal="pressed" from="CanvasLayer/Win/Win" to="." method="_on_Win_pressed"]
[connection signal="strike" from="CanvasLayer/Win/Win/Win_light" to="." method="_on_Win_light_strike"]
[connection signal="animation_finished" from="CanvasLayer/Win/Win/Win_light/AnimationPlayer" to="CanvasLayer/Win/Win/Win_light" method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="CanvasLayer/Win/Win/Win_light/Timer" to="CanvasLayer/Win/Win/Win_light" method="_on_Timer_timeout"]
[connection signal="pressed" from="CanvasLayer/Tutorial/Close_tutorial" to="." method="_on_Close_tutorial_pressed"]
[connection signal="strike" from="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light" to="." method="_on_Tutorial_light_strike"]
[connection signal="animation_finished" from="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light/AnimationPlayer" to="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light" method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light/Timer" to="CanvasLayer/Tutorial/Close_tutorial/Tutorial_light" method="_on_Timer_timeout"]
[connection signal="animation_finished" from="Map/Lightning/AnimationPlayer" to="Map/Lightning" method="_on_AnimationPlayer_animation_finished"]
[connection signal="timeout" from="Map/Lightning/Timer" to="Map/Lightning" method="_on_Timer_timeout"]
[connection signal="body_entered" from="Map/Tower" to="." method="_on_Tower_body_entered"]
